var GraphEditor=this.GraphEditor=function(j,s){function ua(a,b){return a-b}function ba(a,b){for(var c=0,d=a.length;c<d;++c)if(b(a[c]))return a[c]}function va(a,b){var c,d=a.length,e=0;for(c=0;c<d;c++)if(b(a[c],a[e]))e=c;return a[e]}function ca(a,b,c,d){k.beginPath();k.arc(a,b,c,0,Math.PI*2,true);k.closePath();d||k.fill();k.stroke()}function S(a,b,c,d){k.lineWidth=1;k.beginPath();k.moveTo(a,b);k.lineTo(c,d);k.stroke()}function M(a,b){return{x:a||0,y:b||0}}function x(a,b){return{x:a*b.x,y:a*b.y}}function y(a,
b){return{x:a.x+b.x,y:a.y+b.y}}function B(a,b){return{x:a.x-b.x,y:a.y-b.y}}function D(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))}function N(a,b){return a.x*b.x+a.y*b.y}function wa(a){var b,c=[],d;for(d=0;d<h.length;d+=1)(b=h[d].connects_to(a))&&b!==a&&c.push(b);return c}function da(){for(var a=0,b,c=false;!c;){c=true;for(b=0;b<g.length;b++)if(g[b].label===a.toString()){a++;c=false;break}}return a.toString()}function xa(a){return va(g.map(function(b){var c=b.get_pos();return{d:D(y(c,x(-1,
a))),node:b}}),function(b,c){return b.d<c.d})}function ea(a){if(A){var b,c;E=[];for(c=h.length-1;c>-1;c-=1){b=h[c];if(b.is_touching(a))E=E.concat(h.splice(c,1))}a=g.indexOf(a);if(a!==-1)F=g.splice(a,1)[0];$("#undo_button").removeClass("graph_editor_undo_disabled");m()}}function ya(){if(F){F.label=da();g.push(F);h=h.concat(E);F=undefined;E=[];$("#undo_button").addClass("graph_editor_undo_disabled");m()}}function za(a){var b=ba(h,function(c){return c.is_loop(a)});b?h.splice(h.indexOf(b),1):h.push(new q(a,
a))}function T(a,b){var c,d=false,e;if(a!==b){for(e=h.length-1;e>-1;e-=1){c=h[e];if(c.is_touching(a)&&c.is_touching(b)){d=true;break}}d?h.splice(e,1):h.push(new q(a,b))}}function U(){g.length<=25?fa():ga()}function fa(){var a;for(a=0;a<g.length;a+=1)g[a].set_pos({x:l.x/2+2*l.x/5*Math.sin(2*Math.PI*a/g.length),y:l.y/2-2*l.y/5*Math.cos(2*Math.PI*a/g.length)});m()}function ga(){var a,b,c;b=Math.floor(Math.sqrt(g.length*l.x/l.y));c=Math.ceil(g.length/b);for(a=0;a<g.length;a++)g[a].set_pos({x:l.x/b*(a%
b+0.5),y:l.y/c*(Math.floor(a/b)+0.5)});m()}function Aa(a){a=Math.PI*(1-a/180);var b,c,d,e;for(e=0;e<g.length;e+=1){d=g[e].get_pos();b=d.x-l.x/2;c=d.y-l.y/2;d=Math.sqrt(b*b+c*c);b=Math.atan2(c,b)+a-ha;g[e].set_pos({x:l.x/2+d*Math.cos(b),y:l.y/2+d*Math.sin(b)})}ha=a;m()}function Ba(a){var b=a.get_nodes(),c;c=y(b.node1.get_pos(),b.node2.get_pos());c.x*=0.5;c.y*=0.5;c=new o(c);g.push(c);T(c,b.node1);T(c,b.node2);h.splice(h.indexOf(a),1);return c}function ia(a,b,c,d){var e,i=a.get_pos();e=b.get_pos();
var f=-e.x+i.x;i=-e.y+i.y;e=Math.max(Math.sqrt(f*f+i*i),0.01);c=c(e,d)/e;f*=c;i*=c;a.change_vel(f,i);b.change_vel(-f,-i)}function Ca(a,b){return-Math.sqrt(a)/b}function Da(a,b){var c=b*b;return c*c/(a*a)}function V(a){a=a.split("\n").filter(function(b){return b.length>0}).map(function(b){return b.split(",")});ja({vertices:a[0]||[],edges:a.slice(1)||[]})}function ka(){var a=[];a.push(g.map(function(b){return b.label}));a=a.concat(h.filter(function(b){return b.label}).map(function(b){return[b.node1.label,
b.node2.label,b.label]}));return a.map(function(b){return b.join(",")}).join("\n")}function W(a){var b;try{b=JSON.parse(a)}catch(c){alert("Unable to parse.");return}ja(b)}function ja(a){var b,c={},d,e;g=[];h=[];m();for(b=0;b<a.vertices.length;b+=1){d=new o({x:0,y:0},a.vertices[b]);c[a.vertices[b]]=d;g.push(d)}if(a.pos){var i=-Infinity;d=Infinity;e=-Infinity;var f=Infinity,n,t,p;for(b in a.pos){i=Math.max(i,a.pos[b][0]);e=Math.max(e,a.pos[b][1]);d=Math.min(d,a.pos[b][0]);f=Math.min(f,a.pos[b][1])}i-=
d;p=e-f;for(b in a.pos){e=c[b];n=(a.pos[b][0]-d)/i;n=n*8*l.x/10+l.x/10;t=(a.pos[b][1]-f)/p;t=t*8*l.y/10+l.y/10;e.set_pos({x:n,y:t})}}else U();for(b=0;b<a.edges.length;b+=1)h.push(new q(c[a.edges[b][0]],c[a.edges[b][1]],1,a.edges[b][2]));la=a.name;m()}function ma(){var a,b,c;c="% uses the tkz-brege package\n";c+="\\begin{tikzpicture}\n\n";for(b=0;b<g.length;b++){c+="\\Vertex";a=g[b].get_pos();c+="[x="+0.75*a.x+"pt,y="+0.75*(l.y-a.y)+"pt]";c+="{"+b+"};\n"}c+="\n";for(b=0;b<h.length;b++){c+="\\Edge";
a=h[b].get_nodes();c+="("+g.indexOf(a.node1)+")";c+="("+g.indexOf(a.node2)+")";c+="\n"}c+="\n";c+="\\end{tikzpicture}\n";return c}function na(){var a={},b,c;a.vertices=g.map(function(d){return d.label});a.edges=h.map(function(d){return[d.node1.label,d.node2.label,d.label]});a.pos={};for(c=0;c<g.length;c++){b=g[c].get_pos();a.pos[g[c].label]=[b.x,b.y]}a.name=la;return JSON.stringify(a)}function G(a,b,c,d){var e="<tr>";e+='<td><input type="checkbox"';e+=' value="'+b+'"';if(b)e+="checked";e+="/></td>";
e+="<td>"+a+"</td>";e+="</tr>";$(c).append(e);$(c+" input:last").click(d)}function z(a,b,c){a='<input type="button" id="'+a+'_button" value="'+a+'"';a+="/>";$(b).append(a);$(b+" input:last").click(c)}function H(a,b,c,d,e,i){a="<tr><td>"+a+"</td>";a+='<td><div class="slider"></div></td></tr>';$(c).append(a);$(c+" div.slider:last").slider({min:d,max:e,value:b,slide:function(f,n){i(n.value)}})}function Ea(a){$(a+" canvas").offset();var b=a+" #graph_editor_button_container";$(a+" canvas");$(a).prepend('<div id="graph_editor_button_container"></div>');
$('<div id="live_button" class="graph_editor_button">live</div>').appendTo(b).click(oa);$('<div id="menu_button" class="graph_editor_button menu_button">menu</div>').appendTo(b).toggle(function(){$(a).animate({width:l.x+330+"px"},{queue:true,duration:"fast",easing:"linear",complete:function(){$(a+" #graph_editor_menu").slideToggle("fast");I=true}});$(a+" #menu_button").toggleClass("graph_editor_button_on")},function(){$(a+" #graph_editor_menu").slideToggle("fast",function(){$(a).animate({width:l.x+
"px"},{queue:true,duration:"fast",easing:"linear"});I=undefined});$(a+" #menu_button").toggleClass("graph_editor_button_on")}).each(function(){I&&$(this).click()});$('<div id="undo_button" class="graph_editor_button">undo</div>').appendTo(b).click(ya).toggleClass("graph_editor_undo_disabled");$('<div id="reset_button" class="graph_editor_button">reset</div>').appendTo(b).click(function(){if(confirm("The graph will be irreversibly erased. This operation cannot be undone.")){g=[];h=[];m()}});$('<div id="help_button" class="graph_editor_button">?</div>').appendTo(b).click(function(){$("#help_dialog").dialog("open")});
$(a).append('<div id="graph_editor_menu"></div>');Fa(a);$(a).append("<div id='help_dialog'>        <ul>            <li><h3>unselect object</h3>Press escape.</li>            <li><h3>create vertex</h3>Click on empty space not too close to existing vertices.            <li><h3>create/erase edge</h3>Select the first vertex. Click on another vertex (different than the selected one) to turn on/off (toggle) the edge between them.            <li><h3>increase/decrease multiplicity</h3> Use +/-. When multiplicity is 0 the edge disappears.            <li><h3>remove a vertex or edge</h3>Press delete when the object is selected.            <li><h3>keep the selected vertex after edge toggle</h3>Hold 'SHIFT' to preserve the selected vertex after creating/erasing an edge.            <li><h3>split an edge</h3> press 's' when edge is selected            <li><h3>freeze a vertex</h3> pressing 'r' freezes the selected vertex (it will not move in live mode)            <li><h3>add/remove loop</h3> press 'o'            <li><h3>undo vertex deletion</h3>Click on the Undo button. Only the last deleted vertex can be recovered.            <li><h3>turn on realtime spring-charge model</h3>Press 'l' or click on the live checkbox.        </ul>        </div>");
$("#help_dialog").dialog({autoOpen:false,width:700,title:"Graph Editor Help",modal:true})}function Fa(a){if(I){menu=a+" #graph_editor_menu";$(menu).html("");$(menu).append("<div class='infobox'><h4 id='title'>Info</h4>    <div id='info'>Index: <span id='index'></span><br>    <span id='pos'>Position: (<span id='posx'></span>, <span id='posy'></span>)<br></span>    <span id='vert'>Vertices: <span id='v1'></span>-><span id='v2'></span><br></span>    <span id='label-container'>Label: <span id='label-plain'></span><input type='text' id='label'></span></div>    <div id='none_selected'>No node is selected</div></div>");
$(a+" .infobox #info").hide();$(a+" .infobox #label").keyup(function(b){var c=$(a+" .infobox #index").html(),d=$(a+" .infobox #title").html(),e=$(a+" .infobox #label").val();if(d==="Vertex Info"){g[c].label=e;A||b.preventDefault()}else if(d==="Edge Info")if(!C||/^[0-9\.]*$/.test(e))h[c].label=e;else alert("Not a number!")});$(menu).append("<h4>Tweaks</h4>");z("Circular layout",menu,function(){confirm("All vertices will be irreversably moved. This operation cannot be undone.")&&fa()});z("Grid layout",
menu,function(){confirm("All vertices will be irreversably moved. This operation cannot be undone.")&&ga()});$(menu).append("<table>");G("Edge labels",O,menu,function(){O=!O;m()});G("Vertex labels",J,menu,function(){J=!J;m()});G("Numeric edges",C,menu,function(b){if(C||confirm("Any non-numeric edge labels will be deleted. This operation cannot be undone.")){C=!C;m()}else b.preventDefault()});G("Modifiable vertices",A,menu,function(){A=!A;m();$(".infobox #title").html()=="Vertex Info"&&pa(a)});G("Info on mouseover",
P,menu,function(){P=!P;m()});$(menu).append("</table><table>");H("Font Size",X,menu,10,19,function(b){X=b;m()});H("Vertex Size",r,menu,0,30,function(b){r=b;m()});H("Orientation",0,menu,0,360,Aa);$(menu).append("</table>").hide();H("Edge Strength",50,menu,0,100,function(b){K=b/50;K*=2*K});H("Edge Length",Y,menu,0,200,function(b){Y=b});$(menu).append("<h4>Import / Export</h4>");$(menu).append('<div id="io_buttons">');z("Import JSON",menu+" #io_buttons",function(){W($(a+" #json").val())});z("Export JSON",
menu+" #io_buttons",function(){$(a+" #json").val(na())});$(menu+" #io_buttons").append("<br>");z("Import CSV",menu+" #io_buttons",function(){V($(a+" #json").val())});z("Export CSV",menu+" #io_buttons",function(){$(a+" #json").val(ka())});$(menu+" #io_buttons").append("<br>");z("Export Latex",menu+" #io_buttons",function(){$(a+" #json").val(ma())});z("Export image",menu+" #io_buttons",function(){var b=$(a+" canvas")[0].toDataURL("image/png");window.open(b,"Graph Editor Image","menubar=false,toolbar=false,location=false,width="+
l.x+",height="+l.y)});$(menu).append('<textarea id="json" rows="5" cols="34"></textarea><br>')}}function pa(a){if(A){$(a+" .infobox #label").show();$(a+" .infobox #label-plain").hide()}else{$(a+" .infobox #label").hide();$(a+" .infobox #label-plain").show()}}function Q(a){if(I){var b,c;if(a&&a instanceof o){b=a.get_pos();c=g.indexOf(a);pa(j);$(j+" .infobox #title").html("Vertex Info");$(j+" .infobox #index").html(c);$(j+" .infobox #pos").show();$(j+" .infobox #posx").html(b.x.toFixed(1));$(j+" .infobox #posy").html(b.y.toFixed(1));
$(j+" .infobox #vert").hide();$(j+" .infobox #label").val(a.label);$(j+" .infobox #label-plain").html(a.label);$(j+" .infobox #none_selected").hide();$(j+" .infobox #info").show()}else if(a&&a instanceof q){b=a.get_nodes();c=h.indexOf(a);$(j+" .infobox #label").show();$(j+" .infobox #label-plain").hide();$(j+" .infobox #title").html("Edge Info");$(j+" .infobox #index").html(c);$(j+" .infobox #pos").hide();$(j+" .infobox #vert").show();$(j+" .infobox #v1").html(b.node1.label);$(j+" .infobox #v2").html(b.node2.label);
$(j+" .infobox #label").val(a.label||"");$(j+" .infobox #label-plain").html(a.label||"");$(j+" .infobox #none_selected").hide();$(j+" .infobox #info").show()}else{$(j+" .infobox #title").html("Info");$(j+" .infobox #none_selected").show();$(j+" .infobox #info").hide()}}}function m(){var a=(new Date).getTime();k.clearRect(0,0,l.x,l.y);var b;if(v){b=Math.max(Math.sqrt(Y),0.01);var c,d,e;c=0;for(e=g.length;c<e;++c){d=g[c];var i=d.get_pos(),f=Math.min(i.x,i.y,l.x-i.x,l.y-i.y),n=void 0;n=x(20/(f*f),B(Ga,
i));d.change_vel(n.x,n.y);for(d=c+1;d<e;d+=1)ia(g[c],g[d],Da,b)}c=0;for(e=h.length;c<e;++c){d=h[c].get_nodes();ia(d.node1,d.node2,Ca,b)}c=0;for(e=g.length;c<e;++c)g[c].run()}for(b=0;b<h.length;b+=1)h[b].display();for(b=0;b<g.length;b+=1)g[b].display();Z&&k.fillText((1E3/(a-qa)).toFixed(1),10,10);qa=a}function oa(){if(v){v=false;clearInterval(R)}else{v=true;R=setInterval(m,1E3/ra)}$(j+" #live_button").toggleClass("graph_editor_button_on")}var h=[],g=[],E=[],w,sa,o,q,la,F,I=true,l={x:s.width||500,y:s.height||
500},Ga={x:l.x/2,y:l.y/2},ta=s.directed||false,Ha=s.multigraph||false,r=s.node_radius||12,X=s.font_size||12,v=false,C=false,O=true,J=true,A=true,P=true,K=2,Y=100,ha=Math.PI,Z=false,aa=false,ra=s.fps||60,u,k,R,qa;o=function(a,b){this.pos=a?M(a.x,a.y):M();this.v=M();this.frozen=false;this.label=b||da()};o.prototype={node_loop_angle:function(){var a=[],b=0,c,d,e=0,i=this.pos;a=wa(this).map(function(f){f=f.get_pos();return Math.atan2(-f.y+i.y,f.x-i.x)});a.sort(ua);for(c=0;c<a.length-1;c+=1){d=a[c+1]-
a[c];if(d>e){b=a[c]+d/2;e=d}}d=Math.PI*2+a[0]-a[a.length-1];if(d>e)b=a[a.length-1]+d/2;return b},display:function(){var a;k.strokeStyle="#000000";k.fillStyle=this.selected?"#FF0000":this.closest?"#CCC000":J?"#FFFFFF":this.frozen?"#C0C0C0":"#000000";ca(this.pos.x,this.pos.y,r);if(J){k.fillStyle="#000000";a=g.indexOf(this).toString();k.textAlign="center";k.textBaseline="middle";k.fillText(a,this.pos.x,this.pos.y)}},vector_from:function(a){return{x:this.pos.x-a.x,y:this.pos.y-a.y}},change_vel:function(a,
b){if(!this.frozen){this.v.x+=a;this.v.y+=b}},get_pos:function(){return this.pos},set_pos:function(a){this.pos=a},toggle_freeze:function(){this.frozen=!this.frozen},get_frozen:function(){return this.frozen},draw_loop:function(){var a=this.node_loop_angle();ca(this.pos.x+1.5*Math.cos(a)*r,this.pos.y-1.5*Math.sin(a)*r,2*r,true)},run:function(){this.pos.x+=Math.min(Math.max(K*this.v.x,-20),20);this.pos.y+=Math.min(Math.max(K*this.v.y,-20),20);this.v.x*=0.5;this.v.y*=0.5}};q=function(a,b,c,d){this.node1=
a;this.node2=b;this.multi=c||1;this.label=d};q.prototype={draw_arrow_tips:function(a,b){var c={x:b.x-a.x,y:b.y-a.y},d=D(c);d=y(a,{x:c.x*(1-r/d),y:c.y*(1-r/d)});var e=Math.PI+Math.atan2(c.y,c.x);c=e+Math.PI/6;e-=Math.PI/6;e={x:r*Math.cos(e),y:r*Math.sin(e)};c=y(d,{x:r*Math.cos(c),y:r*Math.sin(c)});e=y(d,e);S(d.x,d.y,c.x,c.y);S(d.x,d.y,e.x,e.y)},draw_simple:function(){var a=this.node1.get_pos(),b=this.node2.get_pos();S(a.x,a.y,b.x,b.y);ta&&this.draw_arrow_tips(a,b)},draw_multi:function(){var a=this.node1.get_pos(),
b=this.node2.get_pos(),c=x(0.5,y(a,b)),d=B(a,b),e,i,f;e={x:d.y,y:-d.x};e=x(1/D(e),e);for(f=-(this.multi-1)/2;f<=(this.multi-1)/2;f+=1){i=y(c,x(D(d)*f/10,e));var n=a.x,t=a.y,p=i.x,L=i.y,Ia=i.x,Ja=i.y,Ka=b.x,La=b.y;k.beginPath();k.moveTo(n,t);k.bezierCurveTo(p,L,Ia,Ja,Ka,La);k.stroke();ta&&this.draw_arrow_tips(i,b)}},draw_label:function(){var a=this.node1.get_pos(),b=this.node2.get_pos(),c=x(0.5,y(a,b));a=this.label;b=c.x;c=c.y-1;k.font=X+"px sans-serif";k.fillText(a||"",b,c)},display:function(){k.strokeStyle=
this.selected?k.fillStyle="#CC0000":this.closest?k.fillStyle="#CCC000":this.node1.selected||this.node2.selected?k.fillStyle="#0000C0":k.fillStyle="#000000";if(C&&!/^[0-9\.]*$/.test(this.label))this.label=null;O&&this.draw_label();if(this.node1===this.node2)this.node1.draw_loop();else this.multi<2?this.draw_simple():this.draw_multi()},is_touching:function(a){return a===this.node1||a===this.node2},is_loop:function(a){return a===this.node1&&a===this.node2},connects_to:function(a){var b;if(this.node1===
a)b=this.node2;if(this.node2===a)b=this.node1;return b},get_nodes:function(){return{node1:this.node1,node2:this.node2}},inc_mult:function(){if(Ha)this.multi+=1},dec_mult:function(){if(this.multi>0)this.multi-=1;this.multi===0&&h.splice(h.indexOf(this),1)}};sa=function(){var a,b,c,d,e,i=new M;return{select_object:function(f){if(b===f)this.unselect_object();else{b&&this.unselect_object();b=f;f.selected=true;Q(f)}},set_mouse:function(f){var n=$(f.currentTarget).offset();i={x:f.pageX-n.left,y:f.pageY-
n.top}},unselect_object:function(){if(b){b.selected=false;b=undefined;Q()}},drag_node_start:function(f){c=f;d=f.get_frozen();f.get_frozen()||f.toggle_freeze();v||(R=setInterval(m,1E3/ra))},update_drag:function(f){c.set_pos(f);c===b&&Q(c)},drag_node_stop:function(){d===false&&c.toggle_freeze();c=undefined;v||clearInterval(R)},find_closest:function(){var f;(f=xa(i))&&f.d<r?this.update_closest(f.node):this.update_closest(ba(h,function(n){var t=n.get_nodes();n=i;var p=t.node1.get_pos();t=t.node2.get_pos();
var L=B(n,p);p=B(t,p);return D(B(L,x(N(L,p)/N(p,p),p)))<15&&N(p,L)>0&&N(x(-1,p),B(n,t))>0}))},update_closest:function(f){if(e&&e!==f)e.closest=false;if(e=f)f.closest=true},mousedown:function(){if(e&&e instanceof o)a=e;v||m()},mouseup:function(){var f;if(c)this.drag_node_stop();else if(a&&b===undefined)this.select_object(a);else if(a&&b instanceof o&&b!==a){T(b,a);aa||this.unselect_object()}else if(e)this.select_object(e);else if(A){f=new o(i);v||this.update_closest(f);g.push(f)}a=undefined;v||m()},
mousemove:function(f){this.set_mouse(f);a&&!c&&this.drag_node_start(a);c&&this.update_drag(i);this.find_closest();P&&!b&&Q(e);v||m()},keydown:function(f){if(f.keyCode===16)aa=true;if(f.keyCode===8){if(b){if(b instanceof o)ea(b);else b instanceof q&&b.dec_mult();this.unselect_object()}f.preventDefault()}if(f.keyCode===27){this.unselect_object();m()}},keyup:function(){aa=false},keypress:function(f){if(String.fromCharCode(f.charCode)==="-"&&b){if(b instanceof o)ea(b);else b instanceof q&&b.dec_mult();
this.unselect_object()}String.fromCharCode(f.charCode)==="l"&&oa();if(String.fromCharCode(f.charCode)==="f")Z=!Z;if(String.fromCharCode(f.charCode)==="r"&&b instanceof o){b.toggle_freeze();this.unselect_object()}String.fromCharCode(f.charCode)==="+"&&b instanceof q&&b.inc_mult();String.fromCharCode(f.charCode)==="o"&&b instanceof o&&za(b);String.fromCharCode(f.charCode)==="s"&&b instanceof q&&this.select_object(Ba(b));v||m()},mouseleave:function(){this.drag_node_stop()},dblclick:function(){}}};(function(){w=
sa();$(j).addClass("graph_editor_container");$(j).append('<canvas class="graph_editor_canvas" width = "'+l.x+'" height = "'+l.y+'" >Your browser does not support canvas.</canvas>');u=$(j+" canvas");$(j).css({width:l.x+"px"});k=u[0].getContext("2d");k.translate(0.5,0.5);u.attr("tabindex","0");u.keydown(function(a){w.keydown(a)});u.keypress(function(a){w.keypress(a)});u.keyup(function(a){w.keyup(a)});u.dblclick(function(a){w.dblclick(a)});u.mousedown(function(a){w.mousedown(a)});u.mouseup(function(a){w.mouseup(a)});
u.mousemove(function(a){w.mousemove(a)});u.mouseleave(function(a){w.mouseleave(a)});u[0].onselectstart=function(){return false};if(s.JSONdata){W(s.JSONdata);m()}if(s.CSVdata){V(s.CSVdata);m()}s.controls!==false&&Ea(j)})();return{import_from_CSV:V,export_CSV:ka,import_from_JSON:W,export_tkz:ma,export_sage:na,get_raw_data:function(){return{nodes:g,edge_list:h,SIZE:l}},complete_graph:function(a){g=[];h=[];var b,c;for(b=0;b<a;b++){g.push(new o);for(c=0;c<b;c++)h.push(new q(g[b],g[c]))}U()},grid_graph:function(a,
b){b=b||a;g=[];h=[];var c,d;for(c=0;c<b*a;c++)g.push(new o);for(c=0;c<a;c++)for(d=0;d<b;d++){d!=b-1&&h.push(new q(g[c*b+d],g[c*b+d+1]));c!=a-1&&h.push(new q(g[c*b+d],g[c*b+d+b]))}U()}}};
